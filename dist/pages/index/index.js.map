{"version":3,"file":"pages/index/index.js","sources":["webpack:///._src_pages_index_index.js","webpack:///./src/pages/index/index.js?947d","webpack:///._src_pages_index_index.scss"],"sourcesContent":["import React, { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Taro, { usePullDownRefresh, useShareAppMessage } from '@tarojs/taro';\nimport { View } from '@tarojs/components';\nimport { AtList, AtListItem, AtActivityIndicator } from 'taro-ui';\nimport { fetchQuestionnaires } from '../../actions/questionnaires';\nimport './index.scss';\n\nexport default function Index() {\n  const dispatch = useDispatch();\n  const questionnaires = useSelector(state => state.questionnaires.list);\n  const loading = useSelector(state => state.questionnaires.loading);\n\n  const fetchData = async () => {\n    Taro.showNavigationBarLoading();\n    await dispatch(fetchQuestionnaires());\n    Taro.hideNavigationBarLoading();\n  };\n\n  const fetchDataCallback = useCallback(fetchData, []);\n\n  useEffect(() => {\n    fetchDataCallback();\n  }, [fetchDataCallback]);\n\n  usePullDownRefresh(async () => {\n    await fetchData();\n    Taro.stopPullDownRefresh();\n  });\n\n  useShareAppMessage(() => ({\n    title: '问卷宝典',\n    path: '/pages/index/index',\n  }));\n\n  const handleClick = item => Taro.navigateTo({ url: `/pages/introduce/index?questionnaireId=${item.id}` });\n\n  const questionnaireList = questionnaires.map(item => (\n    <AtListItem\n      key={item.id}\n      title={item.title}\n      extraText={`${item.duration} 分钟`}\n      arrow='right'\n      onClick={() => handleClick(item)}\n    />\n  ));\n\n  return (\n    <View className='page'>\n      <View className='doc-body bg'>\n        <View className='panel'>\n          <View className='panel__title'>问卷列表</View>\n          <View className='panel__content no-padding'>\n            <View className='example-item list'>\n              {loading ? (\n                <AtActivityIndicator mode='center' />\n              ) : (\n                  <AtList>\n                    {questionnaireList}\n                  </AtList>\n                )\n              }\n            </View>\n          </View>\n        </View>\n      </View>\n    </View>\n  )\n}\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js!./index.js\"\nvar config = {\"navigationBarTitleText\":\"问卷宝典\",\"enablePullDownRefresh\":true,\"enableShareAppMessage\":true};\n\ncomponent.enableShareAppMessage = true\nvar inst = Page(createPageConfig(component, 'pages/index/index', {root:{cn:[]}}, config || {}))\n\n\n","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAKA;AAEA;AACA;AADA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AALA;AADA;AAUA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAEA;AAAA;AAJA;AADA;AAFA;AADA;AADA;AAoBA;;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;;;;A","sourceRoot":""}